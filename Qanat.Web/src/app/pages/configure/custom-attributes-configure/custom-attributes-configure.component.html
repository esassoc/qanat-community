<page-header pageTitle="Custom Attributes"></page-header>

@if (initialData$ | async; as initialData) {
    <div class="page-body">
        <div class="form page-controls" [formGroup]="formGroup">
            <form-field
                [formInputOptions]="customAttributeTypeDropdownOptions"
                [formControl]="formGroup.controls.CustomAttributeTypeID"
                fieldLabel="Custom Attribute Type"
                [type]="FormFieldType.Select">
            </form-field>
        </div>
        <app-alert-display></app-alert-display>
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">{{ isReadonly ? "View" : "Update" }} Custom Attributes</h3>
            </div>
            <div class="card-body">
                @if (customAttributeData$ | async) {
                    <custom-attributes-edit
                        [loadingSpinner]="{ isLoading: isLoading }"
                        [customAttributes]="customAttributes"
                        [geographyID]="geographyID"
                        [customAttributeTypeID]="formGroup.controls.CustomAttributeTypeID.value"
                        [readonly]="isReadonly">
                    </custom-attributes-edit>
                }
            </div>
            @if (!isReadonly) {
                <div class="card-footer flex-end">
                    <button type="submit" class="btn btn-primary" [disabled]="isLoadingSubmit" [buttonLoading]="isLoadingSubmit" (click)="save()">Save</button>
                </div>
            }
        </div>
    </div>
}
